#!/bin/bash
set -e

if [[ -z "${1}" || -z "${2}" || -z "${3}" || -z "${4}" || -z "${5}" ]]; then
  # Not sending error to &2 since GWT compiler does not do that either
  echo "usage: compileModule moduleName dev.jar user.jar benchmark_src output_dir"
  exit 1
fi

MODULE_NAME=${1}
shift
GWT_DEV_JAR=${1}
shift
GWT_USER_JAR=${1}
shift
BENCHMARKS_SRC=${1}
shift
OUTPUT_DIR=${1}
shift

#Echo back all the parameters so that we can verify them in test
echo "${MODULE_NAME};${GWT_DEV_JAR};${GWT_USER_JAR};${BENCHMARKS_SRC};${OUTPUT_DIR};${@};" > target/test-out
